@page "/certification"

@rendermode InteractiveServer
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Authorization
@using Mooc.Data
@using Microsoft.EntityFrameworkCore
@inject UserManager<ApplicationUser> UserManagerService
@inject IDbContextFactory<ApplicationDbContext> DbContextFactory
@inject NavigationManager NavigationManager
@attribute [Authorize]
@attribute [StreamRendering]

<PageTitle>Mes Certifications</PageTitle>

<div class="container-fluid py-4">
    <!-- En-tête de la page -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex align-items-center justify-content-between">
                <div>
                    <h1 class="h2 text-dark fw-bold mb-2">
                        <i class="bi bi-award-fill text-warning me-3"></i>
                        Mes Certifications
                    </h1>
                    <p class="text-muted mb-0">Consultez et téléchargez vos certificats de formation</p>
                </div>
                <div class="d-none d-md-block">
                    <div class="bg-light p-3 rounded-3 text-center">
                        <i class="bi bi-trophy-fill text-warning fs-2"></i>
                        <div class="mt-2">
                            <small class="text-muted d-block">Total</small>
                            <strong class="text-primary">3</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filtres et recherche -->
    <div class="row mb-4">
        <div class="col-md-2 mt-2 mt-md-0">
            <div class="d-flex gap-2 justify-content-md-end">
                <select class="form-select" style="max-width: 200px;">
                    <option selected>Filtre</option>
                    <option value="1">Disponibles</option>
                    <option value="2">En cours</option>
                </select>
                <button class="btn btn-outline-secondary">
                    <i class="bi bi-funnel"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Tableau des certifications -->
    <div class="row">
        <div class="col-12">
            <div class="card border-0 shadow-sm table-view">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="bg-light">
                                <tr>
                                    <th scope="col" class="border-0 px-4 py-3">
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-hash text-muted me-2"></i>
                                            ID
                                        </div>
                                    </th>
                                    <th scope="col" class="border-0 px-4 py-3">
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-award text-muted me-2"></i>
                                            Certificat
                                        </div>
                                    </th>
                                    <th scope="col" class="border-0 px-4 py-3 d-none d-lg-table-cell">
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-calendar-event text-muted me-2"></i>
                                            Session
                                        </div>
                                    </th>
                                    <th scope="col" class="border-0 px-4 py-3">
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-gear text-muted me-2"></i>
                                            Actions
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="certification-row">
                                    <td class="px-4 py-3">
                                        <span class="badge bg-primary rounded-pill">001</span>
                                    </td>
                                    <td class="px-4 py-3">
                                        <div class="d-flex align-items-center">
                                            <div class="certification-icon me-3">
                                                <i class="bi bi-file-earmark-pdf-fill text-danger fs-4"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-1 fw-semibold">Développement Web Avancé</h6>
                                                <small class="text-muted">Certification professionnelle</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 d-none d-lg-table-cell">
                                        <div>
                                            <span class="d-block fw-medium">Session Automne 2024</span>
                                            <small class="text-muted">15 Oct. - 20 Déc. 2024</small>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3">
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-success btn-sm d-flex align-items-center">
                                                <i class="bi bi-download me-1"></i>
                                                <span class="d-none d-sm-inline">Télécharger</span>
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm d-flex align-items-center">
                                                <i class="bi bi-eye me-1"></i>
                                                <span class="d-none d-sm-inline">Voir</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="certification-row">
                                    <td class="px-4 py-3">
                                        <span class="badge bg-primary rounded-pill">002</span>
                                    </td>
                                    <td class="px-4 py-3">
                                        <div class="d-flex align-items-center">
                                            <div class="certification-icon me-3">
                                                <i class="bi bi-file-earmark-pdf-fill text-danger fs-4"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-1 fw-semibold">Base de Données MySQL</h6>
                                                <small class="text-muted">Certification technique</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 d-none d-lg-table-cell">
                                        <div>
                                            <span class="d-block fw-medium">Session Été 2024</span>
                                            <small class="text-muted">01 Juin - 31 Août 2024</small>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3">
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-success btn-sm d-flex align-items-center">
                                                <i class="bi bi-download me-1"></i>
                                                <span class="d-none d-sm-inline">Télécharger</span>
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm d-flex align-items-center">
                                                <i class="bi bi-eye me-1"></i>
                                                <span class="d-none d-sm-inline">Voir</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="certification-row">
                                    <td class="px-4 py-3">
                                        <span class="badge bg-warning text-dark rounded-pill">003</span>
                                    </td>
                                    <td class="px-4 py-3">
                                        <div class="d-flex align-items-center">
                                            <div class="certification-icon me-3">
                                                <i class="bi bi-hourglass-split text-warning fs-4"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-1 fw-semibold">Cybersécurité Avancée</h6>
                                                <small class="text-muted">En cours de traitement</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 d-none d-lg-table-cell">
                                        <div>
                                            <span class="d-block fw-medium">Session Hiver 2024</span>
                                            <small class="text-muted">01 Déc. 2024 - 28 Fév. 2025</small>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3">
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-secondary btn-sm d-flex align-items-center" disabled>
                                                <i class="bi bi-clock me-1"></i>
                                                <span class="d-none d-sm-inline">En attente</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Message si aucune certification -->
    @* Remplacez "false" par une condition réelle ou supprimez ce bloc si inutile *@
    @if (AucuneCertification)
    {
        <div class="row mt-5">
            <div class="col-12">
                <div class="text-center py-5">
                    <div class="mb-4">
                        <i class="bi bi-award text-muted" style="font-size: 4rem;"></i>
                    </div>
                    <h4 class="text-muted mb-3">Aucune certification trouvée</h4>
                    <p class="text-muted mb-4">Vous n'avez pas encore de certificats disponibles. Terminez vos formations pour obtenir vos certificats.</p>
                    <a href="/formations" class="btn btn-primary">
                        <i class="bi bi-book me-2"></i>
                        Voir les formations
                    </a>
                </div>
            </div>
        </div>
    }
</div>

@code {
    // Ajoutez une propriété pour la condition
    private bool AucuneCertification => false; // Remplacez par la logique réelle
}